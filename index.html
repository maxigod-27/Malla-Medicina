<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Malla Curricular - Medicina Fundación Barceló</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background-color: #f5f9fc;
      color: #333;
      margin: 0;
      padding: 0 20px;
    }

    header {
      text-align: center;
      padding: 20px;
    }

    header img {
      max-width: 300px;
      height: auto;
    }

    h1 {
      text-align: center;
      color: #003e6b;
      margin-top: 10px;
    }

    .year {
      margin-top: 30px;
    }

    .year h2 {
      color: #005fa3;
      border-bottom: 2px solid #ccc;
      padding-bottom: 5px;
    }

    .cycle {
      margin-top: 15px;
    }

    .subjects {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .subject {
      background-color: #ffffff;
      border: 2px solid #b0c4de;
      padding: 10px 12px;
      border-radius: 8px;
      cursor: pointer;
      position: relative;
      transition: background 0.2s, border 0.2s;
    }

    .subject.completed {
      background-color: #d4edda;
      border-color: #28a745;
      color: #155724;
    }

    .subject.locked {
      background-color: #eee;
      color: #aaa;
      border-style: dashed;
      cursor: not-allowed;
    }

    .subject.locked:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: -28px;
      left: 0;
      right: 0;
      background-color: #333;
      color: #fff;
      font-size: 12px;
      padding: 5px 8px;
      border-radius: 5px;
      white-space: pre-line;
      z-index: 100;
    }

    hr {
      margin: 40px 0;
    }
  </style>
</head>
<body>

  <header>
    <img src="Logo_Fundación_H_A_Barceló.png" alt="Logo Fundación Barceló" />
    <h1>Malla Curricular - Medicina</h1>
  </header>

  <main id="curriculum"></main>

  <script>
    const curriculum = [
      {
        year: "PRIMER AÑO",
        cycle: "Ciclo Introductorio",
        subjects: [
          { name: "Bases Biológicas y Antropológicas de la Vida" },
          { name: "Introducción al Estudio de la Medicina" }
        ]
      },
      {
        year: "SEGUNDO AÑO",
        cycle: "Ciclo Biomédico",
        subjects: [
          { name: "Anatomía Normal", requires: ["Bases Biológicas y Antropológicas de la Vida"] },
          { name: "Histología y Embriología. Genética Humana", requires: ["Bases Biológicas y Antropológicas de la Vida"] },
          { name: "Bioquímica Celular", requires: ["Bases Biológicas y Antropológicas de la Vida"] },
          { name: "Atención Primaria de la Salud" },
          { name: "Informática Médica I" },
          { name: "Inglés Médico I" },
          { name: "Asignatura Electiva u Optativa I" },
          { name: "Asignatura Electiva u Optativa II" }
        ]
      },
      {
        year: "TERCER AÑO",
        cycle: "Ciclo Biomédico",
        subjects: [
          { name: "Fisiología", requires: ["Anatomía Normal", "Bioquímica Celular"] },
          { name: "Bioquímica-Inmunología. Nutrición Normal", requires: ["Bioquímica Celular"] },
          { name: "Salud Mental I" },
          { name: "Informática Médica II", requires: ["Informática Médica I"] },
          { name: "Inglés Médico II", requires: ["Inglés Médico I"] },
          { name: "Asignatura Electiva u Optativa III" },
          { name: "Asignatura Electiva u Optativa IV" }
        ]
      },
      {
        year: "CUARTO AÑO",
        cycle: "Ciclo Biomédico",
        subjects: [
          { name: "Patología General. Fisiopatología. Patología Especial", requires: ["Fisiología", "Bioquímica-Inmunología. Nutrición Normal"] },
          { name: "Microbiología", requires: ["Bioquímica-Inmunología. Nutrición Normal"] },
          { name: "Semiología General", requires: ["Fisiología"] },
          { name: "Farmacología General", requires: ["Fisiología"] },
          { name: "Informática Médica III", requires: ["Informática Médica II"] },
          { name: "Inglés Médico III", requires: ["Inglés Médico II"] },
          { name: "Asignatura Electiva u Optativa V" },
          { name: "Asignatura Electiva u Optativa VI" }
        ]
      },
      {
        year: "QUINTO AÑO",
        cycle: "Ciclo Clínico Quirúrgico",
        subjects: [
          { name: "Medicina Interna I", requires: ["Semiología General"] },
          { name: "Terapéutica Clínica I", requires: ["Farmacología General"] },
          { name: "Nutrición Clínica", requires: ["Bioquímica-Inmunología. Nutrición Normal"] },
          { name: "Diagnóstico por Imágenes" },
          { name: "Salud Mental II (Psicosemiología y Psiquiatría)", requires: ["Salud Mental I"] },
          { name: "Historia de la Medicina" },
          { name: "Bioética" },
          { name: "Asignatura Electiva u Optativa VII" },
          { name: "Asignatura Electiva u Optativa VIII" }
        ]
      },
      {
        year: "SEXTO AÑO",
        cycle: "Ciclo Clínico Quirúrgico",
        subjects: [
          { name: "Medicina Interna II y Terapéutica Clínica II (y Taller de APS VI)", requires: ["Medicina Interna I", "Terapéutica Clínica I"] },
          { name: "Neurología" },
          { name: "Infectología del Adulto (Infectología y Neumotisiología)", requires: ["Microbiología"] },
          { name: "Epidemiología (y Taller de Met. y Téc. de la Investig. Cient. VI)" },
          { name: "Dermatología" },
          { name: "Cirugía" },
          { name: "Oftalmología" },
          { name: "Urología" },
          { name: "Otorrinolaringología" },
          { name: "Ortopedia y Traumatología" },
          { name: "Emergentología" },
          { name: "Obstetricia" },
          { name: "Ginecología" },
          { name: "Medicina Infanto-Juvenil (Pediatría)" },
          { name: "Medicina Legal" },
          { name: "Toxicología" },
          { name: "Asignatura Electiva u Optativa IX" },
          { name: "Asignatura Electiva u Optativa X" }
        ]
      },
      {
        year: "SÉPTIMO AÑO – INTERNADO ROTATORIO",
        cycle: "",
        subjects: [
          { name: "Clínica Médica y Emergentología", requires: ["Medicina Interna II y Terapéutica Clínica II (y Taller de APS VI)"] },
          { name: "Cirugía (y Urgencias Quirúrgicas)", requires: ["Cirugía"] },
          { name: "Tocoginecología", requires: ["Ginecología", "Obstetricia"] },
          { name: "Medicina Infanto-juvenil", requires: ["Medicina Infanto-Juvenil (Pediatría)"] },
          { name: "Atención Primaria. Pasantía Rural-Comunitaria" }
        ]
      }
    ];

    const container = document.getElementById("curriculum");
    const completedSubjects = JSON.parse(localStorage.getItem("completedSubjects") || "[]");

    function isCompleted(name) {
      return completedSubjects.includes(name);
    }

    function canUnlock(subject) {
      if (!subject.requires) return true;
      return subject.requires.every(req => isCompleted(req));
    }

    function createSubjectElement(subject) {
      const div = document.createElement("div");
      div.className = "subject";
      div.textContent = subject.name;

      if (isCompleted(subject.name)) {
        div.classList.add("completed");
      } else if (!canUnlock(subject)) {
        div.classList.add("locked");
        div.setAttribute("data-tooltip", "Requiere:\n" + subject.requires.join("\n"));
      }

      div.addEventListener("click", () => {
        if (div.classList.contains("locked")) return;

        if (isCompleted(subject.name)) {
          completedSubjects.splice(completedSubjects.indexOf(subject.name), 1);
        } else {
          completedSubjects.push(subject.name);
        }

        localStorage.setItem("completedSubjects", JSON.stringify(completedSubjects));
        location.reload();
      });

      return div;
    }

    curriculum.forEach(section => {
      const yearDiv = document.createElement("div");
      yearDiv.className = "year";

      const yearTitle = document.createElement("h2");
      yearTitle.textContent = section.year;
      yearDiv.appendChild(yearTitle);

      if (section.cycle) {
        const cycleTitle = document.createElement("h3");
        cycleTitle.textContent = section.cycle;
        cycleTitle.className = "cycle";
        yearDiv.appendChild(cycleTitle);
      }

      const subjectsDiv = document.createElement("div");
      subjectsDiv.className = "subjects";

      section.subjects.forEach(subject => {
        const el = createSubjectElement(subject);
        subjectsDiv.appendChild(el);
      });

      yearDiv.appendChild(subjectsDiv);
      container.appendChild(yearDiv);
      container.appendChild(document.createElement("hr"));
    });
  </script>
</body>
</html>

